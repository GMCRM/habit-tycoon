import{H as h,Ha as S,J as m,K as g,M as d,N as u,O as f,P as C,Z as v,_ as A,aa as P,i as a,j as r,m as s,n as c,o as l,xa as w}from"./chunk-7BOSYXOY.js";import"./chunk-EQMUS7GP.js";import"./chunk-G4GOZ2R2.js";import"./chunk-QLV7WNCT.js";import"./chunk-33BWIX5B.js";import"./chunk-GSXUNAQW.js";import"./chunk-6F2JRA2A.js";import"./chunk-EGVB773T.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as p}from"./chunk-VI73JOY6.js";var I=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-PSFWN3OZ.js").then(o=>o.HomePage)},{path:"login",loadComponent:()=>import("./chunk-E6OS3F5R.js").then(o=>o.LoginPage)},{path:"sign-up",loadComponent:()=>import("./chunk-5HOZDBRB.js").then(o=>o.SignUpPage)},{path:"dev-tools",loadComponent:()=>import("./chunk-NGFBXVJO.js").then(o=>o.DevToolsPage)},{path:"create-habit-business",loadComponent:()=>import("./chunk-H2HGKBSP.js").then(o=>o.CreateHabitBusinessPage)},{path:"social",loadComponent:()=>import("./chunk-TBHGDPBQ.js").then(o=>o.SocialPage)},{path:"stocks",loadComponent:()=>import("./chunk-YBBGXTTJ.js").then(o=>o.StocksPage)},{path:"reset-password",loadComponent:()=>import("./chunk-QLDEYMVP.js").then(o=>o.ResetPasswordPage)},{path:"settings",loadComponent:()=>import("./chunk-P6TY2O3T.js").then(o=>o.SettingsPage)},{path:"**",redirectTo:"login",pathMatch:"full"}];var b=(()=>{let i=class i{constructor(t,e){this.authService=t,this.router=e}ngOnInit(){return p(this,null,function*(){console.log("\u{1F50D} AppComponent: Initializing app, current path:",window.location.pathname);try{let{data:{session:t}}=yield this.authService.getSession();if(t){console.log("\u2705 AppComponent: User session found");let e=window.location.pathname;e==="/login"||e==="/sign-up"||e==="/"?(console.log("\u{1F504} AppComponent: Redirecting from auth page to home"),this.router.navigate(["/home"])):console.log("\u{1F50D} AppComponent: Staying on current protected page:",e)}else{console.log("\u274C AppComponent: No user session found");let e=window.location.pathname;["/home","/social","/create-habit-business","/habit-checkin","/dev-tools"].includes(e)&&(console.log("\u{1F504} AppComponent: Redirecting from protected page to login"),this.router.navigate(["/login"]))}}catch(t){console.log("\u274C AppComponent: Session check failed:",t);let e=window.location.pathname;["/home","/social","/create-habit-business","/habit-checkin","/dev-tools"].includes(e)&&(console.log("\u{1F504} AppComponent: Redirecting from protected page to login (session check failed)"),this.router.navigate(["/login"]))}this.authService.onAuthStateChange((t,e)=>{if(console.log("\u{1F50D} AppComponent: Auth state change:",t,"current path:",window.location.pathname),t==="SIGNED_OUT")console.log("\u{1F504} AppComponent: User signed out, redirecting to login"),this.router.navigate(["/login"]);else if(t==="SIGNED_IN"){let n=window.location.pathname;n==="/login"||n==="/sign-up"||n==="/"?(console.log("\u{1F504} AppComponent: User signed in from auth page, redirecting to home"),this.router.navigate(["/home"])):console.log("\u{1F50D} AppComponent: User signed in, staying on current page:",n)}})})}};i.\u0275fac=function(e){return new(e||i)(a(S),a(g))},i.\u0275cmp=r({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(e,n){e&1&&(s(0,"ion-app"),l(1,"ion-router-outlet"),c())},dependencies:[P,A],encapsulation:2});let o=i;return o})();h(b,{providers:[{provide:m,useClass:v},w(),u(I,f(d),C())]});
