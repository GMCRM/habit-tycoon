import{A as h,Aa as q,B as f,Ba as z,C as _,G as C,Ha as F,K as M,L as P,Q as k,R as v,S as U,T as O,U as D,V as E,X as V,Y as I,ca as T,d as c,e as g,ea as A,fa as N,h as m,i as y,ia as G,j as S,la as W,m as i,ma as L,n as o,o as x,p as b,q as p,w as r}from"./chunk-MCTHTYWV.js";import"./chunk-EQMUS7GP.js";import"./chunk-G4GOZ2R2.js";import"./chunk-QLV7WNCT.js";import"./chunk-33BWIX5B.js";import"./chunk-GSXUNAQW.js";import"./chunk-6F2JRA2A.js";import"./chunk-EGVB773T.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as u}from"./chunk-VI73JOY6.js";var te=(()=>{let d=class d{constructor(e,a){this.authService=e,this.router=a,this.email="",this.displayName="",this.password=""}onGoogleSignUp(){return u(this,null,function*(){console.log("\u{1F504} Starting Google OAuth signup...");try{let e=yield this.authService.signUpWithGoogle();if(e.error){console.error("\u274C Google signup failed:",e.error),alert("Google signup failed: "+e.error?.message||"Unknown error");return}console.log("\u2705 Google OAuth initiated successfully")}catch(e){console.error("\u274C Unexpected Google signup error:",e),alert("Unexpected error during Google signup: "+e)}})}onSignUp(){return u(this,null,function*(){let e=this.email.trim(),a=this.password.trim(),n=this.displayName.trim();if(!e||!a){alert("Please fill in all required fields");return}if(a.length<6){alert("Password must be at least 6 characters long");return}console.log("\u{1F504} Starting sign-up process..."),console.log("Email:",e),console.log("Display name:",n);try{let t=yield this.authService.signUp(e,a,n);if(t.error){console.error("\u274C Sign-up failed:",t.error);let l="Sign-up failed: ";t.error.message?l+=t.error.message:l+="Unknown error occurred",t.error.details&&console.error("Error details:",t.error.details),alert(l);return}console.log("\u2705 Sign-up successful:",t.data),t.data?.user&&!t.data.user.email_confirmed_at?alert("Sign-up successful! Please check your email to confirm your account before logging in."):alert("Sign-up successful! You can now log in."),this.router.navigate(["/login"])}catch(t){console.error("\u274C Unexpected sign-up error:",t),alert("Unexpected error during sign-up: "+t)}})}testDatabase(){return u(this,null,function*(){console.log("\u{1F527} Testing database connection...");try{let e=yield this.authService.testConnection();console.log("Database test result:",e),e.success?alert("\u2705 Database connection successful!"):(alert("\u274C Database connection failed: "+e.message),console.error("Database error:",e.error))}catch(e){console.error("\u274C Database test failed:",e),alert("\u274C Database test failed: "+e)}})}testAuthOnly(){return u(this,null,function*(){let e=this.email.trim(),a=this.password.trim();if(!e||!a){alert("Please fill in email and password first");return}console.log("\u{1F9EA} Testing auth-only signup...");try{let{data:n,error:t}=yield this.authService.supabase.auth.signUp({email:e,password:a});t?(console.error("\u274C Auth signup failed:",t),alert("Auth signup failed: "+t.message)):(console.log("\u2705 Auth signup successful:",n),alert("\u2705 Auth signup successful! User ID: "+n.user?.id))}catch(n){console.error("\u274C Auth test failed:",n),alert("\u274C Auth test failed: "+n)}})}};d.\u0275fac=function(a){return new(a||d)(y(F),y(M))},d.\u0275cmp=S({type:d,selectors:[["app-sign-up"]],decls:42,vars:3,consts:[["signUpForm","ngForm"],[1,"ion-padding"],[1,"center-card-container"],[1,"card-title"],["expand","block","fill","solid","color","danger",3,"click"],["name","logo-google","slot","start"],[1,"divider","ion-text-center","ion-margin"],[3,"ngSubmit"],["position","floating"],["type","email","name","email","required","","maxlength","100",3,"ngModelChange","ngModel"],["type","text","name","displayName","required","","maxlength","30",3,"ngModelChange","ngModel"],[1,"input-helper"],["type","password","name","password","required","","maxlength","100",3,"ngModelChange","ngModel"],["expand","block","fill","outline","type","submit",3,"click"],["expand","block","fill","outline","color","warning",3,"click"],["expand","block","fill","outline","color","tertiary",3,"click"],[1,"login-link","ion-text-center","ion-margin-top"],["routerLink","/login"]],template:function(a,n){if(a&1){let t=b();i(0,"ion-content",1)(1,"div",2)(2,"ion-card")(3,"ion-card-content")(4,"h1",3),r(5,"Sign Up"),o(),i(6,"ion-button",4),p("click",function(){return c(t),g(n.onGoogleSignUp())}),x(7,"ion-icon",5),r(8," Continue with Google "),o(),i(9,"div",6)(10,"span"),r(11,"or"),o()(),i(12,"form",7,0),p("ngSubmit",function(){return c(t),g(n.onSignUp())}),i(14,"ion-item")(15,"ion-label",8),r(16,"Email"),o(),i(17,"ion-input",9),_("ngModelChange",function(s){return c(t),f(n.email,s)||(n.email=s),g(s)}),o()(),i(18,"ion-item")(19,"ion-label",8),r(20,"Display Name"),o(),i(21,"ion-input",10),_("ngModelChange",function(s){return c(t),f(n.displayName,s)||(n.displayName=s),g(s)}),o()(),i(22,"p",11),r(23,"How you'll appear to friends"),o(),i(24,"ion-item")(25,"ion-label",8),r(26,"Password"),o(),i(27,"ion-input",12),_("ngModelChange",function(s){return c(t),f(n.password,s)||(n.password=s),g(s)}),o()(),i(28,"ion-button",13),p("click",function(){return c(t),g(n.onSignUp())}),r(29," Sign Up with Email "),o()(),i(30,"div",6)(31,"span"),r(32,"Debug Tools"),o()(),i(33,"ion-button",14),p("click",function(){return c(t),g(n.testDatabase())}),r(34," \u{1F527} Test Database "),o(),i(35,"ion-button",15),p("click",function(){return c(t),g(n.testAuthOnly())}),r(36," \u{1F9EA} Test Auth Only "),o(),i(37,"div",16)(38,"p"),r(39,"Already have an account?"),o(),i(40,"a",17),r(41,"Click here to log in!"),o()()()()()()}a&2&&(m(17),h("ngModel",n.email),m(4),h("ngModel",n.displayName),m(6),h("ngModel",n.password))},dependencies:[G,z,T,W,L,A,N,q,C,I,D,k,v,E,V,O,U,P],styles:['.center-card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:60px 20px 20px}ion-card[_ngcontent-%COMP%]{width:100%;max-width:400px;min-height:500px;border-radius:16px;box-shadow:0 4px 12px #00000026}.card-title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:700;color:var(--ion-color-primary);margin:0 0 32px;letter-spacing:.5px}ion-card-content[_ngcontent-%COMP%]{padding:32px;display:flex;flex-direction:column;justify-content:center;height:100%}ion-item[_ngcontent-%COMP%]{--background: transparent;--border-color: var(--ion-color-medium);margin-bottom:16px}ion-button[_ngcontent-%COMP%]{margin-top:24px;height:48px;font-weight:600}.input-helper[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin:-12px 0 8px 16px;font-style:italic}.login-link[_ngcontent-%COMP%]{margin-top:24px}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:var(--ion-color-medium-shade);font-size:.9rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.divider[_ngcontent-%COMP%]{margin:1rem 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:var(--ion-color-medium);z-index:1}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:var(--ion-background-color);padding:0 1rem;color:var(--ion-color-medium);position:relative;z-index:2}']});let w=d;return w})();export{te as SignUpPage};
