import{a as re}from"./chunk-QTGGTTZQ.js";import{B as ie,E as ne,O as se,a as Q,ba as oe,d as X,i as Z,l as ee,n as te}from"./chunk-IGBCOJ5F.js";import{Aa as K,F as A,G as H,Ha as ae,K as B,L,ca as F,d as D,e as k,ea as N,fa as M,ga as O,h as r,ha as V,i as y,ia as Y,j as R,k as v,ka as W,l as d,la as j,m as o,ma as q,n as t,o as b,p as P,q as f,r as p,ta as z,va as G,w as n,x as w,y as u,za as J}from"./chunk-7BOSYXOY.js";import"./chunk-EQMUS7GP.js";import"./chunk-G4GOZ2R2.js";import"./chunk-QLV7WNCT.js";import"./chunk-33BWIX5B.js";import"./chunk-GSXUNAQW.js";import"./chunk-6F2JRA2A.js";import"./chunk-EGVB773T.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{j as h}from"./chunk-VI73JOY6.js";function ce(l,g){if(l&1){let s=P();o(0,"ion-button",29),f("click",function(){D(s);let a=p();return k(a.logout())}),b(1,"ion-icon",30),n(2," Logout "),t()}}function de(l,g){if(l&1&&(o(0,"span"),n(1),t()),l&2){let s=p(2);r(),u(" with $",s.userProfile==null?null:s.userProfile.cash," cash")}}function ue(l,g){if(l&1&&(o(0,"div",31)(1,"ion-card",32)(2,"ion-card-content")(3,"h2"),n(4),t(),o(5,"p"),n(6," You're successfully logged in "),v(7,de,2,1,"span",33),t()()()()),l&2){let s=p();r(4),u(" \u{1F389} Welcome back, ",(s.userProfile==null?null:s.userProfile.name)||(s.currentUser.user_metadata==null?null:s.currentUser.user_metadata.name)||s.currentUser.email,"! "),r(3),d("ngIf",(s.userProfile==null?null:s.userProfile.cash)!==void 0)}}function me(l,g){if(l&1){let s=P();o(0,"div",34)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),n(4,"\u{1F464} Your Profile Data"),t()(),o(5,"ion-card-content")(6,"div",35)(7,"p")(8,"strong"),n(9,"User ID:"),t(),n(10),t(),o(11,"p")(12,"strong"),n(13,"Email:"),t(),n(14),t(),o(15,"p")(16,"strong"),n(17,"Auth Name:"),t(),n(18),t(),o(19,"p")(20,"strong"),n(21,"Profile Name:"),t(),n(22),t(),o(23,"p")(24,"strong"),n(25,"Cash:"),t(),n(26),t(),o(27,"p")(28,"strong"),n(29,"Net Worth:"),t(),n(30),t(),o(31,"p")(32,"strong"),n(33,"Created:"),t(),n(34),t()(),o(35,"div",36)(36,"ion-button",37),f("click",function(){D(s);let a=p();return k(a.deleteAccount())}),n(37," \u{1F5D1}\uFE0F Delete Account "),t(),o(38,"ion-button",38),f("click",function(){D(s);let a=p();return k(a.refreshProfile())}),n(39," \u{1F504} Refresh Profile "),t()()()()()}if(l&2){let s=p();r(10),u(" ",s.currentUser.id),r(4),u(" ",s.currentUser.email),r(4),u(" ",(s.currentUser.user_metadata==null?null:s.currentUser.user_metadata.name)||"Not set"," "),r(4),u(" ",(s.userProfile==null?null:s.userProfile.name)||"Loading..."," "),r(4),u(" $",(s.userProfile==null?null:s.userProfile.cash)||"Loading..."," "),r(4),u(" $",(s.userProfile==null?null:s.userProfile.net_worth)||"Loading..."," "),r(4),u(" ",(s.userProfile==null?null:s.userProfile.created_at)||"Loading..."," ")}}function ge(l,g){if(l&1&&(o(0,"p"),n(1),t()),l&2){let s=p(2);r(),u(" Error: ",s.dbTestResult.error.message||s.dbTestResult.error," ")}}function he(l,g){if(l&1&&(o(0,"div",39)(1,"ion-item",40),b(2,"ion-icon",41),o(3,"ion-label")(4,"h3"),n(5),t(),v(6,ge,2,1,"p",33),t()()()),l&2){let s=p();r(),d("color",s.dbTestResult.success?"success":"danger"),r(),d("name",s.dbTestResult.success?"checkmark-circle":"alert-circle"),r(3),w(s.dbTestResult.message),r(),d("ngIf",!s.dbTestResult.success&&s.dbTestResult.error)}}function fe(l,g){if(l&1&&(o(0,"p"),n(1),t()),l&2){let s=p(2);r(),u(" Active session found! User: ",s.authTestResult.sessionInfo==null?null:s.authTestResult.sessionInfo.user," ")}}function pe(l,g){l&1&&(o(0,"p"),n(1," No active session (user not logged in) "),t())}function be(l,g){if(l&1&&(o(0,"p"),n(1),t()),l&2){let s=p(2);r(),u(" Error: ",s.authTestResult.error.message||s.authTestResult.error," ")}}function _e(l,g){if(l&1&&(o(0,"div",39)(1,"ion-item",40),b(2,"ion-icon",41),o(3,"ion-label")(4,"h3"),n(5),t(),v(6,fe,2,1,"p",33)(7,pe,2,0,"p",33)(8,be,2,1,"p",33),t()()()),l&2){let s=p();r(),d("color",s.authTestResult.success?"success":"danger"),r(),d("name",s.authTestResult.success?"checkmark-circle":"alert-circle"),r(3),w(s.authTestResult.message),r(),d("ngIf",s.authTestResult.success&&s.authTestResult.hasActiveSession),r(),d("ngIf",s.authTestResult.success&&!s.authTestResult.hasActiveSession),r(),d("ngIf",!s.authTestResult.success&&s.authTestResult.error)}}function ve(l,g){if(l&1&&(o(0,"span"),n(1),t()),l&2){let s=p(3);r(),u(" Dividend Change: $",s.dividendTestResult.details.dividendsDifference.toFixed(2)," ")}}function Te(l,g){if(l&1&&(o(0,"p"),n(1),b(2,"br"),n(3),b(4,"br"),v(5,ve,2,1,"span",33),t()),l&2){let s=p(2);r(),u(" Test Habit: ",s.dividendTestResult.details.testHabit),r(2),u(" Holdings: ",s.dividendTestResult.details.holdingsCount||s.dividendTestResult.details.specificHoldings),r(2),d("ngIf",s.dividendTestResult.details.dividendsDifference!==void 0)}}function Se(l,g){if(l&1&&(o(0,"p"),n(1),t()),l&2){let s=p(2);r(),u(" Error: ",s.dividendTestResult.error.message||s.dividendTestResult.error," ")}}function xe(l,g){if(l&1&&(o(0,"div",39)(1,"ion-item",40),b(2,"ion-icon",41),o(3,"ion-label")(4,"h3"),n(5),t(),v(6,Te,6,3,"p",33)(7,Se,2,1,"p",33),t()()()),l&2){let s=p();r(),d("color",s.dividendTestResult.success?"success":"danger"),r(),d("name",s.dividendTestResult.success?"checkmark-circle":"alert-circle"),r(3),w(s.dividendTestResult.message),r(),d("ngIf",s.dividendTestResult.details),r(),d("ngIf",!s.dividendTestResult.success&&s.dividendTestResult.error)}}var Ae=(()=>{let g=class g{constructor(e,a,i,c){this.authService=e,this.habitBusinessService=a,this.router=i,this.toastController=c,this.dbTestResult=null,this.authTestResult=null,this.isTestingDb=!1,this.isTestingAuth=!1,this.isTestingDividends=!1,this.isFixingStockPrices=!1,this.isFixingLemonadeStocks=!1,this.isAddingMoney=!1,this.currentUser=null,this.userProfile=null,this.dividendTestResult=null,Q({checkmarkCircle:te,alertCircle:X,refresh:se,logOut:ne,home:ie,cash:ee,cafe:Z,wallet:oe}),this.loadCurrentUser()}loadCurrentUser(){return h(this,null,function*(){try{let{data:{user:e}}=yield this.authService.getUser();if(console.log("Current user from auth:",e),this.currentUser=e,e)try{console.log("Attempting to load profile for user ID:",e.id),this.userProfile=yield this.authService.getUserProfile(e.id),console.log("Loaded user profile:",this.userProfile)}catch(a){console.error("Profile loading failed:",a);try{console.log("Attempting to create profile manually..."),yield this.authService.createUserProfile(e.id,e.email,e.user_metadata?.name||e.email.split("@")[0]),this.userProfile=yield this.authService.getUserProfile(e.id),console.log("Created and loaded profile:",this.userProfile)}catch(i){console.error("Profile creation failed:",i)}}}catch{console.log("No user logged in")}})}testDatabaseConnection(){return h(this,null,function*(){this.isTestingDb=!0,this.dbTestResult=null;try{this.dbTestResult=yield this.authService.testConnection()}catch(e){this.dbTestResult={success:!1,message:"Test failed",error:e}}this.isTestingDb=!1})}testAuthSystem(){return h(this,null,function*(){this.isTestingAuth=!0,this.authTestResult=null;try{this.authTestResult=yield this.authService.testAuthConnection()}catch(e){this.authTestResult={success:!1,message:"Auth test failed",error:e}}this.isTestingAuth=!1})}runAllTests(){return h(this,null,function*(){yield this.testDatabaseConnection(),yield this.testAuthSystem()})}logout(){return h(this,null,function*(){try{yield this.authService.signOut(),alert("\u{1F44B} Successfully logged out!"),this.router.navigate(["/login"])}catch(e){alert("\u274C Logout failed: "+e.message)}})}refreshProfile(){return h(this,null,function*(){yield this.loadCurrentUser(),alert("\u{1F504} Profile refreshed!")})}forceCreateProfile(){return h(this,null,function*(){try{console.log("\u{1F504} Force creating profile...");let e=yield this.authService.forceCreateCurrentUserProfile();console.log("\u2705 Profile force created:",e),yield this.loadCurrentUser(),alert(`\u2705 Profile created successfully!

Name: `+e.name+`
Cash: $`+e.cash+`
Net Worth: $`+e.net_worth)}catch(e){console.error("\u274C Force profile creation failed:",e),alert("\u274C Profile creation failed: "+e)}})}checkAllProfiles(){return h(this,null,function*(){console.log("\u{1F50D} Checking all profiles in database...");try{let e=yield this.authService.getAllProfiles();console.log("All profiles found:",e);let a=yield this.authService.getAllAuthUsers();console.log("All auth users found:",a);let{data:{user:i}}=yield this.authService.getUser();console.log("Current auth user:",i);let c="";e&&e.length>0&&(c=e.map(_=>{let S=i&&_.id===i.id?" (THIS IS YOU!)":"";return`ID: ${_.id}${S}
Email: ${_.email}
Name: ${_.name}
Cash: $${_.cash}
Created: ${_.created_at}`}).join(`

`));let m=i?`
Current User ID: ${i.id}
Current User Email: ${i.email}`:`
No current user logged in`;alert(`Found ${e?.length||0} profiles and ${a?.length||0} auth users.

Profile Details:
${c}${m}

Check console for more details.`)}catch(e){console.error("Error checking profiles:",e),alert("Error checking profiles: "+e)}})}deleteAccount(){return h(this,null,function*(){if(!this.currentUser){alert("No user logged in");return}if(confirm(`Are you sure you want to PERMANENTLY delete your account?

This will:
- Delete your profile data
- Delete your authentication account
- Sign you out completely
- Cannot be undone

Continue?`))try{console.log("\u{1F5D1}\uFE0F Starting complete account deletion..."),console.log("Calling server-side delete function...");let{error:a}=yield this.authService.deleteAuthUser();a?(console.error("\u274C Server-side deletion failed:",a),console.log("Falling back to profile deletion only..."),yield this.authService.deleteUserProfile(this.currentUser.id),yield this.authService.signOut(),localStorage.clear(),sessionStorage.clear(),this.currentUser=null,this.userProfile=null,alert(`Profile deleted and signed out successfully!

Note: Complete auth account deletion failed. You may be able to log in again.

For complete deletion, contact support or delete manually from Supabase dashboard.`)):(console.log("\u2705 Complete account deletion successful"),localStorage.clear(),sessionStorage.clear(),this.currentUser=null,this.userProfile=null,alert("Account completely deleted! You cannot log in with these credentials anymore.")),this.router.navigate(["/login"])}catch(a){console.error("\u274C Account deletion failed:",a),alert("Account deletion failed: "+a)}})}debugHabitBusinesses(){return h(this,null,function*(){if(!this.currentUser){alert("No user logged in");return}try{console.log("\u{1F50D} Debugging habit businesses...");let e=yield this.habitBusinessService.getUserHabitBusinesses(this.currentUser.id);console.log("All habit businesses:",e);let a=yield this.habitBusinessService.checkUserHabitsNeedReset(this.currentUser.id);console.log("Habits needing reset:",a);let i=yield this.habitBusinessService.getTodaysActualEarnings(this.currentUser.id);console.log("Today's actual earnings:",i);let c=`Found ${e.length} habit businesses:

`;e.forEach(m=>{c+=`${m.business_name} (${m.frequency}):
`,c+=`  Progress: ${m.current_progress||0}/${m.goal_value||1}
`,c+=`  Last completed: ${m.last_completed_at||"never"}
`,c+=`  Streak: ${m.streak||0}
`,c+=`  Earnings per completion: $${m.earnings_per_completion}

`}),c+=`Today's actual earnings: $${i}

`,a.length>0?(c+=`Habits needing reset: ${a.length}
`,a.forEach(m=>{c+=`  ${m.business_name} (last completed: ${m.last_completed_date})
`})):c+=`No habits need reset.
`,alert(c)}catch(e){console.error("Error debugging habit businesses:",e),alert("Error debugging habit businesses: "+e)}})}testResetOutdatedHabits(){return h(this,null,function*(){try{console.log("\u{1F504} Testing reset outdated habits function..."),yield this.habitBusinessService.resetOutdatedDailyHabits(),yield this.showToast("\u2705 Reset outdated habits test completed!","success")}catch(e){console.error("\u274C Reset outdated habits test failed:",e),yield this.showToast("\u274C Reset outdated habits test failed","danger")}})}cleanupAllHabits(){return h(this,null,function*(){try{if(console.log("\u{1F6A8} Starting emergency cleanup of all habit duplicates..."),!this.currentUser){yield this.showToast("\u274C User not authenticated","danger");return}let e=yield this.habitBusinessService.getUserHabitBusinesses(this.currentUser.id);if(e&&e.length>0){let a=0;for(let i of e)console.log(`\u{1F9F9} Cleaning habit: ${i.business_name}`),yield this.habitBusinessService.cleanupHabitCompletions(i.id),a++;yield this.showToast(`\u2705 Cleaned up ${a} habits successfully!`,"success"),console.log(`\u2705 Emergency cleanup completed for ${a} habits`)}else yield this.showToast("\u2139\uFE0F No habits found to clean up","warning")}catch(e){console.error("\u274C Emergency cleanup failed:",e),yield this.showToast("\u274C Emergency cleanup failed","danger")}})}testDividendProcessing(){return h(this,null,function*(){if(!this.currentUser){yield this.showToast("No user logged in","danger");return}this.isTestingDividends=!0,this.dividendTestResult=null;try{console.log("\u{1F9EA} Testing dividend processing...");let e=yield this.habitBusinessService.getDividendSystemDebugInfo(this.currentUser.id);if(console.log("\u{1F4CA} Dividend system debug info:",e),e.userHoldings.length===0){console.log("\u{1F4A1} No stock holdings found. Creating test dividend..."),yield this.habitBusinessService.createTestDividend(this.currentUser.id,7.5);let a=yield this.habitBusinessService.getTodaysStockDividends(this.currentUser.id);this.dividendTestResult={success:!0,message:"Test dividend created successfully",details:{testType:"Created test dividend (no holdings)",testAmount:7.5,newTotalDividends:a,userHoldings:e.userHoldings.length,ownedBusinessStocks:e.ownedBusinessStocks.length,recentDistributions:e.recentDividendDistributions.length}}}else{let a=yield this.habitBusinessService.getUserHabitBusinesses(this.currentUser.id);if(console.log("Found habits:",a),a.length===0)throw new Error("No habit businesses found for testing");let i=a[0];console.log("Testing with habit:",i);let m=(yield this.habitBusinessService.getAvailableStocks(this.currentUser.id)).find(T=>T.habit_business_id===i.id);if(!m)throw new Error("No stock information found for test habit");console.log("Stock info:",m);let _=e.userHoldings.filter(T=>T.stock_id===m.id);console.log("Holdings for this stock:",_);let S=e.todaysDividends;if(console.log("Dividends before test:",S),_.length>0){console.log("\u{1F527} Running manual dividend processing test..."),yield this.habitBusinessService.processDividendsManually(i.id,i.earnings_per_completion,m.id);let T=yield this.habitBusinessService.getTodaysStockDividends(this.currentUser.id);console.log("Dividends after test:",T),this.dividendTestResult={success:!0,message:"Dividend processing test completed",details:{testHabit:i.business_name,stockId:m.id,holdingsCount:_.length,dividendsBefore:S,dividendsAfter:T,dividendsDifference:T-S,userHoldings:e.userHoldings.length,ownedBusinessStocks:e.ownedBusinessStocks.length}}}else this.dividendTestResult={success:!1,message:"No stockholders found for testing - creating test dividend instead",details:{testHabit:i.business_name,stockId:m.id,allHoldings:e.userHoldings.length,specificHoldings:_.length,ownedBusinessStocks:e.ownedBusinessStocks.length}},yield this.habitBusinessService.createTestDividend(this.currentUser.id,12.34)}yield this.showToast("Dividend test completed - check console for details","success")}catch(e){console.error("\u274C Dividend test failed:",e),this.dividendTestResult={success:!1,message:`Test failed: ${e?.message||"Unknown error"}`,details:{error:e}},yield this.showToast(`Dividend test failed: ${e?.message||"Unknown error"}`,"danger")}finally{this.isTestingDividends=!1}})}showToast(e,a="success"){return h(this,null,function*(){yield(yield this.toastController.create({message:e,duration:3e3,color:a,position:"top"})).present()})}fixStockPrices(){return h(this,null,function*(){this.isFixingStockPrices=!0;try{console.log("\u{1F527} Starting stock price fix..."),yield this.habitBusinessService.fixAllStockPrices(),yield this.showToast("\u2705 All stock prices have been updated!","success"),console.log("\u2705 Stock price fix completed successfully")}catch(e){console.error("\u274C Stock price fix failed:",e),yield this.showToast(`\u274C Failed to fix stock prices: ${e?.message||"Unknown error"}`,"danger")}finally{this.isFixingStockPrices=!1}})}fixLemonadeStockPrices(){return h(this,null,function*(){this.isFixingLemonadeStocks=!0;try{console.log("\u{1F34B} Starting lemonade stock price fix..."),yield this.habitBusinessService.fixLemonadeStockPrices(),yield this.showToast("\u{1F34B} Lemonade stock prices fixed! ($100 \u2192 $1)","success"),console.log("\u2705 Lemonade stock price fix completed successfully")}catch(e){console.error("\u274C Lemonade stock price fix failed:",e),yield this.showToast(`\u274C Failed to fix lemonade prices: ${e?.message||"Unknown error"}`,"danger")}finally{this.isFixingLemonadeStocks=!1}})}debugSpecificHabit(){return h(this,null,function*(){if(!this.currentUser){yield this.showToast("\u274C User not authenticated","danger");return}try{let e=yield this.habitBusinessService.getUserHabitBusinesses(this.currentUser.id);if(!e||e.length===0){yield this.showToast("\u2139\uFE0F No habits found","warning");return}let a=e[0];console.log("\u{1F50D} Starting habit debug for:",a.business_name);let i=yield this.habitBusinessService.debugHabitState(a.id),c=`Debug Results for "${a.business_name}":

Current State:
- Progress: ${i.habitBusiness.current_progress||0}/${i.habitBusiness.goal_value||1}
- Last Completed: ${i.habitBusiness.last_completed_at||"Never"}
- Streak: ${i.habitBusiness.streak||0}

Today's Info:
- Local Date: ${i.dateInfo.todayLocal}
- UTC Date: ${i.dateInfo.todayUTC}
- Timezone: ${i.dateInfo.timezone}

Completions Found:
- All Time: ${i.allCompletions?.length||0} records
- Today (time range): ${i.todayCompletions?.length||0} records
- Today (date string): ${i.todayCompletionsByDate?.length||0} records

UI Method Results:
- isCompletedToday: ${i.uiResults.isCompletedToday}
- isGoalCompleted: ${i.uiResults.isGoalCompleted}

Check console for detailed logs.`;alert(c),yield this.showToast("\u2705 Habit debug completed - check console and alert","success")}catch(e){console.error("\u274C Habit debug failed:",e),yield this.showToast(`\u274C Habit debug failed: ${e?.message}`,"danger")}})}addTestMoney(){return h(this,null,function*(){this.isAddingMoney=!0;try{if(console.log("\u{1F4B0} Starting add test money process..."),!this.currentUser)throw new Error("User not authenticated");console.log("\u{1F4CA} Fetching current profile from database...");let e=yield this.authService.getUserProfile(this.currentUser.id);console.log("\u{1F4CA} Current profile data:",e);let a=e?.cash||0,i=a+1e6;console.log(`\u{1F4B0} Current cash: $${a.toLocaleString()}, adding $1,000,000 = new cash: $${i.toLocaleString()}`),console.log("\u{1F3E2} Calculating business value for net worth...");let c=0;try{let{data:x,error:C}=yield this.authService.supabase.from("habit_businesses").select(`
            id, 
            business_type_id,
            business_types(base_cost)
          `).eq("user_id",this.currentUser.id);if(C)throw console.error("\u274C Business query error:",C),C;x&&x.length>0?(console.log(`\u{1F3E2} Found ${x.length} businesses:`,x),c=x.reduce((le,I)=>{let $=I.business_types?.base_cost||0,U=$*.7;return console.log(`  - Business ${I.id}: base_cost=${$}, value=${U}`),le+U},0),console.log(`\u{1F3E2} Total business value: $${c.toLocaleString()}`)):console.log("\u{1F3E2} No businesses found for user")}catch(x){console.error("\u26A0\uFE0F Error calculating business value:",x)}let m=i+c;console.log(`\u{1F4C8} Calculated net worth: $${i.toLocaleString()} (cash) + $${c.toLocaleString()} (business) = $${m.toLocaleString()}`),console.log("\u{1F4BE} Updating database (cash and net worth)...");let{data:_,error:S}=yield this.authService.supabase.from("user_profiles").update({cash:i,net_worth:m,updated_at:new Date().toISOString()}).eq("id",this.currentUser.id).select();if(S)throw console.error("\u274C Database update error:",S),S;console.log("\u2705 Database update result:",_),console.log("\u{1F504} Refreshing profile data..."),yield this.loadCurrentUser();let T=this.userProfile?.cash||0,E=this.userProfile?.net_worth||0;console.log(`\u2705 Updated profile - Cash: $${T.toLocaleString()}, Net Worth: $${E.toLocaleString()}`),yield this.showToast(`\u{1F4B0} Added $1M! Cash: $${T.toLocaleString()}, Net Worth: $${E.toLocaleString()} \u{1F680}`,"success"),console.log("\u2705 Test money operation completed successfully")}catch(e){console.error("\u274C Failed to add test money:",e),yield this.showToast(`\u274C Failed to add test money: ${e?.message||"Unknown error"}`,"danger")}finally{this.isAddingMoney=!1}})}};g.\u0275fac=function(a){return new(a||g)(y(ae),y(re),y(B),y(J))},g.\u0275cmp=R({type:g,selectors:[["app-dev-tools"]],decls:117,vars:20,consts:[[3,"translucent"],["slot","end","fill","clear","routerLink","/home"],["name","home","slot","start"],["slot","end","fill","clear",3,"click",4,"ngIf"],[1,"ion-padding",3,"fullscreen"],[1,"test-container"],["class","welcome-message ion-margin-bottom",4,"ngIf"],["class","profile-debug ion-margin-bottom",4,"ngIf"],["expand","full","color","primary",1,"ion-margin-bottom",3,"click"],["name","refresh","slot","start"],["fill","outline",3,"click","disabled"],["class","test-result ion-margin-top",4,"ngIf"],[1,"instructions"],["expand","block","fill","outline","color","warning",3,"click"],["expand","block","fill","outline","color","tertiary",3,"click"],["expand","block","fill","solid","color","success",3,"click"],["expand","block","color","danger",3,"click"],["expand","block","fill","outline","color","primary",3,"click"],["expand","block","fill","outline","color","secondary",3,"click"],["expand","block","fill","outline","color","warning",1,"ion-margin-top",3,"click"],["expand","block","fill","solid","color","primary",1,"ion-margin-top",3,"click"],["expand","block","fill","solid","color","success",1,"ion-margin-bottom",3,"click","disabled"],["name","wallet","slot","start"],["expand","block","fill","outline","color","warning",3,"click","disabled"],["name","cash","slot","start"],["expand","block","fill","outline","color","primary",1,"ion-margin-top",3,"click","disabled"],["name","trending-up","slot","start"],["expand","block","fill","solid","color","success",1,"ion-margin-top",3,"click","disabled"],["name","cafe","slot","start"],["slot","end","fill","clear",3,"click"],["name","log-out","slot","start"],[1,"welcome-message","ion-margin-bottom"],["color","success"],[4,"ngIf"],[1,"profile-debug","ion-margin-bottom"],[1,"profile-info"],[1,"profile-actions","ion-margin-top"],["color","danger","fill","outline",3,"click"],["color","warning","fill","outline",3,"click"],[1,"test-result","ion-margin-top"],[3,"color"],["slot","start",3,"name"]],template:function(a,i){a&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n(3,"\u{1F527} Developer Tools"),t(),o(4,"ion-button",1),b(5,"ion-icon",2),n(6," Home "),t(),v(7,ce,3,0,"ion-button",3),t()(),o(8,"ion-content",4)(9,"div",5),v(10,ue,8,2,"div",6)(11,me,40,7,"div",7),o(12,"h1"),n(13,"\u{1F9EA} Database Connection Tests"),t(),o(14,"p"),n(15," Use these tests to verify your Supabase database is working correctly: "),t(),o(16,"ion-button",8),f("click",function(){return i.runAllTests()}),b(17,"ion-icon",9),n(18," Run All Tests "),t(),o(19,"ion-card")(20,"ion-card-header")(21,"ion-card-title"),n(22,"Database Connection"),t()(),o(23,"ion-card-content")(24,"p"),n(25,"Tests basic connectivity to your Supabase database."),t(),o(26,"ion-button",10),f("click",function(){return i.testDatabaseConnection()}),b(27,"ion-icon",9),n(28),t(),v(29,he,7,4,"div",11),t()(),o(30,"ion-card")(31,"ion-card-header")(32,"ion-card-title"),n(33,"Authentication System"),t()(),o(34,"ion-card-content")(35,"p"),n(36,"Tests the Supabase authentication system and current session."),t(),o(37,"ion-button",10),f("click",function(){return i.testAuthSystem()}),b(38,"ion-icon",9),n(39),t(),v(40,_e,9,6,"div",11),t()(),o(41,"ion-card")(42,"ion-card-header")(43,"ion-card-title"),n(44,"Next Steps"),t()(),o(45,"ion-card-content")(46,"div",12)(47,"h4"),n(48,"\u2705 If tests pass:"),t(),o(49,"p"),n(50,"Your database is connected! You can now:"),t(),o(51,"ul")(52,"li"),n(53,"Try signing up a new user"),t(),o(54,"li"),n(55,"Test logging in with those credentials"),t(),o(56,"li"),n(57,"Check your Supabase dashboard for new users"),t()(),o(58,"h4"),n(59,"\u274C If tests fail:"),t(),o(60,"p"),n(61,"Check these common issues:"),t(),o(62,"ul")(63,"li"),n(64,"Verify your Supabase URL and API key"),t(),o(65,"li"),n(66,"Check your internet connection"),t(),o(67,"li"),n(68,"Ensure your Supabase project is active"),t(),o(69,"li"),n(70,"Verify RLS (Row Level Security) settings"),t()()()()(),o(71,"ion-card")(72,"ion-card-header")(73,"ion-card-title"),n(74,"\u{1F527} Debug Tools"),t()(),o(75,"ion-card-content")(76,"ion-button",13),f("click",function(){return i.checkAllProfiles()}),n(77," Check All Profiles in Database "),t(),o(78,"ion-button",14),f("click",function(){return i.refreshProfile()}),n(79," Refresh My Profile "),t(),o(80,"ion-button",15),f("click",function(){return i.forceCreateProfile()}),n(81," \u{1F527} Force Create/Fix My Profile "),t(),o(82,"ion-button",16),f("click",function(){return i.deleteAccount()}),n(83," Delete My Account "),t()()(),o(84,"ion-card")(85,"ion-card-header")(86,"ion-card-title"),n(87,"\u{1F3E2} Habit Business Debug"),t()(),o(88,"ion-card-content")(89,"ion-button",17),f("click",function(){return i.debugHabitBusinesses()}),n(90," \u{1F50D} Debug My Habit Businesses "),t(),o(91,"ion-button",18),f("click",function(){return i.testResetOutdatedHabits()}),n(92," \u{1F504} Test Reset Outdated Habits "),t(),o(93,"ion-button",19),f("click",function(){return i.cleanupAllHabits()}),n(94," \u{1F6A8} Emergency: Clean Up All Habit Duplicates "),t(),o(95,"ion-button",20),f("click",function(){return i.debugSpecificHabit()}),n(96," \u{1F50D} Debug Specific Habit State "),t()()(),o(97,"ion-card")(98,"ion-card-header")(99,"ion-card-title"),n(100,"\u{1F4B0} Stock Dividend Debug"),t()(),o(101,"ion-card-content")(102,"p"),n(103,"Test and debug the stock dividend payout system."),t(),o(104,"ion-button",21),f("click",function(){return i.addTestMoney()}),b(105,"ion-icon",22),n(106),t(),o(107,"ion-button",23),f("click",function(){return i.testDividendProcessing()}),b(108,"ion-icon",24),n(109),t(),o(110,"ion-button",25),f("click",function(){return i.fixStockPrices()}),b(111,"ion-icon",26),n(112),t(),o(113,"ion-button",27),f("click",function(){return i.fixLemonadeStockPrices()}),b(114,"ion-icon",28),n(115),t(),v(116,xe,8,5,"div",11),t()()()()),a&2&&(d("translucent",!0),r(7),d("ngIf",i.currentUser),r(),d("fullscreen",!0),r(2),d("ngIf",i.currentUser),r(),d("ngIf",i.currentUser),r(15),d("disabled",i.isTestingDb),r(2),u(" ",i.isTestingDb?"Testing...":"Test Database"," "),r(),d("ngIf",i.dbTestResult),r(8),d("disabled",i.isTestingAuth),r(2),u(" ",i.isTestingAuth?"Testing...":"Test Auth"," "),r(),d("ngIf",i.authTestResult),r(64),d("disabled",i.isAddingMoney),r(2),u(" ",i.isAddingMoney?"Adding...":"Add $1,000,000 Test Money \u{1F4B0}"," "),r(),d("disabled",i.isTestingDividends),r(2),u(" ",i.isTestingDividends?"Testing...":"Test Dividend Processing"," "),r(),d("disabled",i.isFixingStockPrices),r(2),u(" ",i.isFixingStockPrices?"Fixing...":"Fix All Stock Prices"," "),r(),d("disabled",i.isFixingLemonadeStocks),r(2),u(" ",i.isFixingLemonadeStocks?"Fixing...":"Fix Lemonade Stock Prices ($100 \u2192 $1)"," "),r(),d("ngIf",i.dividendTestResult))},dependencies:[W,G,z,Y,F,N,M,O,V,j,q,K,H,A,L],styles:[".test-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.welcome-message[_ngcontent-%COMP%]{text-align:center}.profile-debug[_ngcontent-%COMP%]{margin-bottom:2rem}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-family:Courier New,monospace;font-size:.9rem}.profile-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.test-result[_ngcontent-%COMP%]{margin-top:1rem}.instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--ion-color-primary);margin-top:1rem;margin-bottom:.5rem}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-left:1rem}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem}"]});let l=g;return l})();export{Ae as DevToolsPage};
