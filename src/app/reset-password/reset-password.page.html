<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Reset Password</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="center-card-container">
    <ion-card>
      <ion-card-content>
        <h1 class="card-title">Set New Password</h1>
        <p class="instruction-text">Enter your new password below</p>

        <form (ngSubmit)="onResetPassword()" #resetForm="ngForm">
          <ion-item>
            <ion-label position="floating">New Password</ion-label>
            <ion-input
              type="password"
              name="password"
              [(ngModel)]="newPassword"
              required
              minlength="6"
              maxlength="100"
              #passwordInput="ngModel"
            ></ion-input>
          </ion-item>
          <div
            *ngIf="passwordInput.invalid && passwordInput.touched"
            class="error-message"
          >
            Password must be at least 6 characters long
          </div>

          <ion-item>
            <ion-label position="floating">Confirm New Password</ion-label>
            <ion-input
              type="password"
              name="confirmPassword"
              [(ngModel)]="confirmPassword"
              required
              maxlength="100"
              #confirmInput="ngModel"
            ></ion-input>
          </ion-item>
          <div
            *ngIf="confirmInput.touched && newPassword !== confirmPassword"
            class="error-message"
          >
            Passwords do not match
          </div>

          <ion-button
            expand="full"
            type="submit"
            [disabled]="!resetForm.form.valid || newPassword !== confirmPassword || isLoading"
          >
            <span *ngIf="!isLoading">Update Password</span>
            <span *ngIf="isLoading">Updating...</span>
          </ion-button>
        </form>

        <div class="login-link ion-text-center ion-margin-top">
          <a routerLink="/login">Back to Login</a>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
